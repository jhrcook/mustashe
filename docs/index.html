<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stash and Load Objects • mustashe</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Stash and Load Objects">
<meta property="og:description" content="A simple system for saving and loading objects in
    R. Long running computations can be stashed after the first run and
    then reloaded the next time. Dependencies can be added to ensure that
    a computation is re-run if any of its dependencies or inputs have
    changed.">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">mustashe</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>

  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/getting-started.html">Getting Started</a>
    </li>
    <li>
      <a href="articles/how-mustashe-works.html">How 'mustashe' works</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="news/index.html">News</a>
</li>
<li>
  <a href="https://github.com/jhrcook/stashR">
    <span class="fa fa-github fa-lg"></span>

  </a>
</li>
<li>
  <a href="https://twitter.com/JoshDoesa">
    <span class="fab fa fab fa-twitter fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="contents col-md-9">
<div id="mustashe---" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#mustashe---" class="anchor"></a>mustashe <a href="https://jhrcook.github.io/mustashe/index.html"> <img src="reference/figures/logo.png" align="right" alt="" width="120"></a>
</h1></div>
<!-- badges: start -->

<p>The goal of ‘mustashe’ is to save time on long-running computations by storing and reloading the resulting object after the first run. The next time the computation is run, instead of evaluating the code, the stashed object is loaded. ‘mustashe’ is great for storing intermediate objects in an analysis.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the released version of ‘mustashe’ from <a href="https://CRAN.R-project.org">CRAN</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"mustashe"</span><span class="op">)</span></pre></div>
<p>And the development version from <a href="https://github.com/jhrcook/mustashe">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="co"># install.packages("devtools")</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"jhrcook/mustashe"</span><span class="op">)</span></pre></div>
</div>
<div id="loading-mustashe" class="section level2">
<h2 class="hasAnchor">
<a href="#loading-mustashe" class="anchor"></a>Loading ‘mustashe’</h2>
<p>The ‘mustashe’ package is loaded like any other, using the <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> function.</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jhrcook/mustashe">mustashe</a></span><span class="op">)</span></pre></div>
</div>
<div id="basic-example" class="section level2">
<h2 class="hasAnchor">
<a href="#basic-example" class="anchor"></a>Basic example</h2>
<p>Below is a simple example of how to use the <code><a href="reference/stash.html">stash()</a></code> function from ‘mustashe’.</p>
<p>Let’s say, for part of an analysis, we are running a long simulation to generate random data <code>rnd_vals</code>. This is mocked below using the <code><a href="https://rdrr.io/r/base/Sys.sleep.html">Sys.sleep()</a></code> function. We can time this process using the ‘tictoc’ library.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="fu">tictoc</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tictoc/man/tic.html">tic</a></span><span class="op">(</span><span class="st">"random simulation"</span><span class="op">)</span>
<span class="fu"><a href="reference/stash.html">stash</a></span><span class="op">(</span><span class="st">"rnd_vals"</span>, <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html">Sys.sleep</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span>
  <span class="va">rnd_vals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">1e5</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>
<span class="co">#&gt; Stashing object.</span>
<span class="fu">tictoc</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tictoc/man/tic.html">toc</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; random simulation: 3.438 sec elapsed</span></pre></div>
<p>Now, if we come back tomorrow and continue working on the same analysis, the second time this process is run the code is not evaluated because the code passed to <code><a href="reference/stash.html">stash()</a></code> has not changed. Instead, the random values <code>rnd_vals</code> is loaded.</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="fu">tictoc</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tictoc/man/tic.html">tic</a></span><span class="op">(</span><span class="st">"random simulation"</span><span class="op">)</span>
<span class="fu"><a href="reference/stash.html">stash</a></span><span class="op">(</span><span class="st">"rnd_vals"</span>, <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html">Sys.sleep</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span>
  <span class="va">rnd_vals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">1e5</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>
<span class="co">#&gt; Loading stashed object.</span>
<span class="fu">tictoc</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tictoc/man/tic.html">toc</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; random simulation: 0.019 sec elapsed</span></pre></div>
</div>
<div id="dependencies" class="section level2">
<h2 class="hasAnchor">
<a href="#dependencies" class="anchor"></a>Dependencies</h2>
<p>A common problem with storing intermediates is that they have dependencies that can change. If a dependency changes, then we want the stashed value to be updated. This is accomplished by passing the names of the dependencies to the <code>depends_on</code> argument.</p>
<p>For instance, let’s say we are calculating some value <code>foo</code> using <code>x</code>. (For the following example, I will use a print statement to indicate when the code is evaluated.)</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">100</span>

<span class="fu"><a href="reference/stash.html">stash</a></span><span class="op">(</span><span class="st">"foo"</span>, depends_on <span class="op">=</span> <span class="st">"x"</span>, <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"Calculating `foo` using `x`."</span><span class="op">)</span>
  <span class="va">foo</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">+</span> <span class="fl">1</span>
<span class="op">}</span><span class="op">)</span>
<span class="co">#&gt; Stashing object.</span>
<span class="co">#&gt; [1] "Calculating `foo` using `x`."</span>

<span class="va">foo</span>
<span class="co">#&gt; [1] 101</span></pre></div>
<p>Now if <code>x</code> is not changed, then the code for <code>foo</code> does not get re-evaluated.</p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">100</span>

<span class="fu"><a href="reference/stash.html">stash</a></span><span class="op">(</span><span class="st">"foo"</span>, depends_on <span class="op">=</span> <span class="st">"x"</span>, <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"Calculating `foo` using `x`."</span><span class="op">)</span>
  <span class="va">foo</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">+</span> <span class="fl">1</span>
<span class="op">}</span><span class="op">)</span>
<span class="co">#&gt; Loading stashed object.</span>

<span class="va">foo</span>
<span class="co">#&gt; [1] 101</span></pre></div>
<p>But if <code>x</code> does change, then <code>foo</code> gets re-evaluated.</p>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">200</span>

<span class="fu"><a href="reference/stash.html">stash</a></span><span class="op">(</span><span class="st">"foo"</span>, depends_on <span class="op">=</span> <span class="st">"x"</span>, <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"Calculating `foo` using `x`."</span><span class="op">)</span>
  <span class="va">foo</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">+</span> <span class="fl">1</span>
<span class="op">}</span><span class="op">)</span>
<span class="co">#&gt; Updating stash.</span>
<span class="co">#&gt; [1] "Calculating `foo` using `x`."</span>

<span class="va">foo</span>
<span class="co">#&gt; [1] 201</span></pre></div>
</div>
<div id="using-here-to-create-file-paths" class="section level2">
<h2 class="hasAnchor">
<a href="#using-here-to-create-file-paths" class="anchor"></a>Using <a href="https://here.r-lib.org">‘here’</a> to create file paths</h2>
<p>The <a href="https://here.r-lib.org">‘here’</a> package is useful for handling file paths in R projects, particularly when using an RStudio project. The main function, <code><a href="https://rdrr.io/pkg/here/man/here.html">here::here()</a></code>, can be used to create the file path for stashing an object by calling <code><a href="reference/use_here.html">use_here()</a></code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit">
<span class="fu"><a href="reference/use_here.html">use_here</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; The global option "mustashe.here" has been set `TRUE`.</span>
<span class="co">#&gt; Add `mustashe::use_here(silent = TRUE)` to you're '.Rprofile'</span>
<span class="co">#&gt;   to have it set automatically in the future.</span></pre></div>
<p>This behavior can be turned off, too.</p>
<div class="sourceCode" id="cb10"><pre class="downlit">
<span class="fu"><a href="reference/dont_use_here.html">dont_use_here</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; No longer using `here::here()` for creating stash file paths.</span></pre></div>
<hr>
<div id="attribution" class="section level3">
<h3 class="hasAnchor">
<a href="#attribution" class="anchor"></a>Attribution</h3>
<p>The inspiration for this package came from the <code>cache()</code> feature in the <a href="http://projecttemplate.net/index.html">‘ProjectTemplate’</a> package. While the functionality and implementation are a bit different, this would have been far more difficult to do without referencing the source code from ‘ProjectTemplate’.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=mustashe">https://​cloud.r-project.org/​package=mustashe</a>
</li>
<li>Browse source code at <br><a href="https://github.com/jhrcook/mustashe/">https://​github.com/​jhrcook/​mustashe/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/jhrcook/mustashe/issues">https://​github.com/​jhrcook/​mustashe/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Joshua H Cook <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-9815-6879" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=mustashe"><img src="https://www.r-pkg.org/badges/version/mustashe" alt="CRAN status"></a></li>
<li><a href="https://cran.r-project.org/package=mustashe"><img src="http://cranlogs.r-pkg.org/badges/grand-total/mustashe" alt="CRAN downloads"></a></li>
<li><a href="https://github.com/jhrcook/mustashe/actions"><img src="https://github.com/jhrcook/mustashe/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
<li><a href="https://travis-ci.org/jhrcook/mustashe"><img src="https://travis-ci.org/jhrcook/mustashe.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://ci.appveyor.com/project/jhrcook/mustashe"><img src="https://ci.appveyor.com/api/projects/status/github/jhrcook/mustashe?branch=master&amp;svg=true" alt="AppVeyor build status"></a></li>
<li><a href="https://codecov.io/gh/jhrcook/mustashe?branch=master"><img src="https://codecov.io/gh/jhrcook/mustashe/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://www.gnu.org/licenses/gpl-3.0"><img src="https://img.shields.io/badge/License-GPLv3-blue.svg" alt="License: GPL v3"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Joshua H Cook.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>




  </body>
</html>
