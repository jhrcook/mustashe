<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stash and Load Objects in R • mustashe</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Stash and Load Objects in R">
<meta property="og:description" content="A simple system for saving and loading objects in R. Long running 
    computations can be stashed after the first run and then reloaded the next
    time. Dependencies can be added to ensure that a computation is re-run if
    any of its dependencies or inputs have changed.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">mustashe</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="news/index.html">Versions</a>
</li>
<li>
  <a href="https://github.com/jhrcook/stashR">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/JoshDoesa">
    <span class="fab fa fab fa-twitter fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="mustashe" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#mustashe" class="anchor"></a>mustashe</h1></div>
<!-- badges: start -->

<p>The goal of ‘mustashe’ is to save time on long-running computations by storing and reloading the resulting object after the first run. The next time the computation is run, instead of evaluating the code, the stashed object is loaded. ‘mustashe’ is great for storing intermediate objects in an analysis.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the released version of ‘mustashe’ from <a href="https://CRAN.R-project.org">CRAN</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"mustashe"</span>)</span></code></pre></div>
<p>And the development version from <a href="https://github.com/jhrcook/mustashe">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># install.packages("devtools")</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>devtools<span class="op">::</span><span class="kw"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"jhrcook/mustashe"</span>)</span></code></pre></div>
</div>
<div id="loading-mustashe" class="section level2">
<h2 class="hasAnchor">
<a href="#loading-mustashe" class="anchor"></a>Loading ‘mustashe’</h2>
<p>The ‘mustashe’ package is loaded like any other, using the <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> function.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(mustashe)</span></code></pre></div>
</div>
<div id="basic-example" class="section level2">
<h2 class="hasAnchor">
<a href="#basic-example" class="anchor"></a>Basic example</h2>
<p>Below is a simple example of how to use the <code><a href="reference/stash.html">stash()</a></code> function from ‘mustashe’.</p>
<p>Let’s say, for part of an analysis, we are running a long simulation to generate random data <code>rnd_vals</code>. This is mocked below using the <code><a href="https://rdrr.io/r/base/Sys.sleep.html">Sys.sleep()</a></code> function. We can time this process using the ‘tictoc’ library.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>tictoc<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/tictoc/man/tic.html">tic</a></span>(<span class="st">"random simulation"</span>)</span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="kw"><a href="reference/stash.html">stash</a></span>(<span class="st">"rnd_vals"</span>, {</span>
<span id="cb4-3"><a href="#cb4-3"></a>    <span class="kw"><a href="https://rdrr.io/r/base/Sys.sleep.html">Sys.sleep</a></span>(<span class="dv">3</span>)</span>
<span id="cb4-4"><a href="#cb4-4"></a>    rnd_vals &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="fl">1e5</span>)</span>
<span id="cb4-5"><a href="#cb4-5"></a>})</span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="co">#&gt; Stashing object.</span></span>
<span id="cb4-7"><a href="#cb4-7"></a>tictoc<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/tictoc/man/tic.html">toc</a></span>()</span>
<span id="cb4-8"><a href="#cb4-8"></a><span class="co">#&gt; random simulation: 3.717 sec elapsed</span></span></code></pre></div>
<p>Now, if we come back tomorrow and continue working on the same analysis, the second time this process is run the code is not evaluated because the code passed to <code><a href="reference/stash.html">stash()</a></code> has not changed. Instead, the random values <code>rnd_vals</code> is loaded.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>tictoc<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/tictoc/man/tic.html">tic</a></span>(<span class="st">"random simulation"</span>)</span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="kw"><a href="reference/stash.html">stash</a></span>(<span class="st">"rnd_vals"</span>, {</span>
<span id="cb5-3"><a href="#cb5-3"></a>    <span class="kw"><a href="https://rdrr.io/r/base/Sys.sleep.html">Sys.sleep</a></span>(<span class="dv">3</span>)</span>
<span id="cb5-4"><a href="#cb5-4"></a>    rnd_vals &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="fl">1e5</span>)</span>
<span id="cb5-5"><a href="#cb5-5"></a>})</span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="co">#&gt; Loading stashed object.</span></span>
<span id="cb5-7"><a href="#cb5-7"></a>tictoc<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/tictoc/man/tic.html">toc</a></span>()</span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="co">#&gt; random simulation: 0.065 sec elapsed</span></span></code></pre></div>
</div>
<div id="dependencies" class="section level2">
<h2 class="hasAnchor">
<a href="#dependencies" class="anchor"></a>Dependencies</h2>
<p>A common problem with storing intermediates is that they have dependencies that can change. If a dependency changes, then we want the stashed value to be updated. This is accomplished by passing the names of the dependencies to the <code>depends_on</code> argument.</p>
<p>For instance, let’s say we are calculating some value <code>foo</code> using <code>x</code>. (For the following example, I will use a print statement to indicate when the code is evaluated.)</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>x &lt;-<span class="st"> </span><span class="dv">100</span></span>
<span id="cb6-2"><a href="#cb6-2"></a></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="kw"><a href="reference/stash.html">stash</a></span>(<span class="st">"foo"</span>, <span class="dt">depends_on =</span> <span class="st">"x"</span>, {</span>
<span id="cb6-4"><a href="#cb6-4"></a>    <span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="st">"Calculating `foo` using `x`."</span>)</span>
<span id="cb6-5"><a href="#cb6-5"></a>    foo &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span><span class="dv">1</span></span>
<span id="cb6-6"><a href="#cb6-6"></a>})</span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="co">#&gt; Stashing object.</span></span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="co">#&gt; [1] "Calculating `foo` using `x`."</span></span>
<span id="cb6-9"><a href="#cb6-9"></a></span>
<span id="cb6-10"><a href="#cb6-10"></a>foo</span>
<span id="cb6-11"><a href="#cb6-11"></a><span class="co">#&gt; [1] 101</span></span></code></pre></div>
<p>Now if <code>x</code> is not changed, then the code for <code>foo</code> does not get re-evaluated.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>x &lt;-<span class="st"> </span><span class="dv">100</span></span>
<span id="cb7-2"><a href="#cb7-2"></a></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="kw"><a href="reference/stash.html">stash</a></span>(<span class="st">"foo"</span>, <span class="dt">depends_on =</span> <span class="st">"x"</span>, {</span>
<span id="cb7-4"><a href="#cb7-4"></a>    <span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="st">"Calculating `foo` using `x`."</span>)</span>
<span id="cb7-5"><a href="#cb7-5"></a>    foo &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span><span class="dv">1</span></span>
<span id="cb7-6"><a href="#cb7-6"></a>})</span>
<span id="cb7-7"><a href="#cb7-7"></a><span class="co">#&gt; Loading stashed object.</span></span>
<span id="cb7-8"><a href="#cb7-8"></a></span>
<span id="cb7-9"><a href="#cb7-9"></a>foo</span>
<span id="cb7-10"><a href="#cb7-10"></a><span class="co">#&gt; [1] 101</span></span></code></pre></div>
<p>But if <code>x</code> does change, then <code>foo</code> gets re-evaluated.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>x &lt;-<span class="st"> </span><span class="dv">200</span></span>
<span id="cb8-2"><a href="#cb8-2"></a></span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="kw"><a href="reference/stash.html">stash</a></span>(<span class="st">"foo"</span>, <span class="dt">depends_on =</span> <span class="st">"x"</span>, {</span>
<span id="cb8-4"><a href="#cb8-4"></a>    <span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="st">"Calculating `foo` using `x`."</span>)</span>
<span id="cb8-5"><a href="#cb8-5"></a>    foo &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span><span class="dv">1</span></span>
<span id="cb8-6"><a href="#cb8-6"></a>})</span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="co">#&gt; Updating stash.</span></span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="co">#&gt; [1] "Calculating `foo` using `x`."</span></span>
<span id="cb8-9"><a href="#cb8-9"></a></span>
<span id="cb8-10"><a href="#cb8-10"></a>foo</span>
<span id="cb8-11"><a href="#cb8-11"></a><span class="co">#&gt; [1] 201</span></span></code></pre></div>
<hr>
<div id="attirubiton" class="section level3">
<h3 class="hasAnchor">
<a href="#attirubiton" class="anchor"></a>Attirubiton</h3>
<p>The inspiration for this package came from the <code>cache()</code> feature in the <a href="http://projecttemplate.net/index.html">‘ProjectTemplate’</a> package. While the functionality and implementation are a bit different, this would have been far more difficult to do without referencing the source code from ‘ProjectTemplate’.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Joshua H Cook <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-9815-6879" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID"></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=mustashe"><img src="https://www.r-pkg.org/badges/version/mustashe" alt="CRAN status"></a></li>
<li><a href="https://travis-ci.org/jhrcook/mustashe"><img src="https://travis-ci.org/jhrcook/mustashe.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://ci.appveyor.com/project/jhrcook/mustashe"><img src="https://ci.appveyor.com/api/projects/status/github/jhrcook/mustashe?branch=master&amp;svg=true" alt="AppVeyor build status"></a></li>
<li><a href="https://codecov.io/gh/jhrcook/mustashe?branch=master"><img src="https://codecov.io/gh/jhrcook/mustashe/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Joshua H Cook.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
